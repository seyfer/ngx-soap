<mat-toolbar color="primary">
  <span class="title">{{ title }}</span>
  <span style="flex: 1 1 auto"></span>
  <button mat-button (click)="toggleDiagnostic()">
    @if (!showDiagnostic()) {
      Show Diagnostic
    } @else {
      Hide Diagnostic
    }
  </button>
</mat-toolbar>

@if (loading()) {
  <mat-progress-bar mode="indeterminate" color="accent"></mat-progress-bar>
}

<div class="w-full px-5 py-5 flex flex-row gap-5">
  <mat-card class="flex-1">
    <mat-card-header>
      <mat-card-title>Operation</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-form-field>
        <input matInput name="intA" [ngModel]="intA()" (ngModelChange)="intA.set($event)" placeholder="A" type="number">
      </mat-form-field>
      <mat-form-field>
        <input matInput name="intB" [ngModel]="intB()" (ngModelChange)="intB.set($event)" placeholder="B" type="number">
      </mat-form-field>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-raised-button color="primary" (click)="sum()" [disabled]="loading()">Sum</button>
      <button mat-raised-button color="primary" (click)="subtract()" [disabled]="loading()">Sub</button>
    </mat-card-actions>
  </mat-card>
  <mat-card class="flex-1">
    <mat-card-header>
      <mat-card-title>Result</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-form-field>
        <input matInput readonly [value]="message()" [placeholder]="resultLabel">
      </mat-form-field>
    </mat-card-content>
  </mat-card>
</div>

@defer (when showDiagnostic()) {
  <div class="w-full px-5 py-5 flex flex-row gap-5">
    <mat-card class="flex-1">
      <mat-card-header>
        <mat-card-title>XML Response</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        {{ xmlResponse() }}
      </mat-card-content>
    </mat-card>
    <mat-card class="flex-1">
      <mat-card-header>
        <mat-card-title>JSON Response</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <pre>{{ jsonResponse() }}</pre>
      </mat-card-content>
    </mat-card>
  </div>
} @placeholder {
  <div class="w-full px-5 py-5 text-center text-gray-500">
    Click "Show Diagnostic" to view SOAP responses
  </div>
}
